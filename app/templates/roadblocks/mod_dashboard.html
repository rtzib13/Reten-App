{% extends "base.html" %}
{% block content %}

<h2>Moderation Dashboard</h2>

{% for report in reports %}
  <div>
    <h3>{{ report.title }}</h3>
    <p>{{ report.city }} | {{ report.status }} | Verified: {{ report.verified }}</p>

    {# VERIFY (POST) #}
    {% if not report.verified and perms.app.can_verify_report %}
      <form action="{% url 'report-verify' report.id %}" method="post" style="display:inline;">
        {% csrf_token %}
        <button type="submit">Verify</button>
      </form>
    {% endif %}

    {# RESOLVE (POST) #}
    {% if report.status != "RESOLVED" and perms.app.can_resolve_report %}
      <form action="{% url 'report-resolve' report.id %}" method="post" style="display:inline;">
        {% csrf_token %}
        <button type="submit">Resolve</button>
      </form>
    {% endif %}

    {# EDIT #}
    {% if perms.app.change_roadblockreport %}
      <a class="btn" href="{% url 'mod-edit-report' report.id %}">Edit</a>
    {% endif %}

    {# DELETE (POST) #}
    {% if perms.app.delete_roadblockreport %}
      <form action="{% url 'delete-report' report.id %}" method="post" style="display:inline;">
        {% csrf_token %}
        <button type="submit" onclick="return confirm('Delete this report?');">
          Delete
        </button>
      </form>
    {% endif %}
  </div>
  <hr>
{% endfor %}

{% endblock %}

